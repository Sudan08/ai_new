---
import { getCollection } from "astro:content";
import { Picture } from "@astrojs/image/components";
import Layout from "@layouts/Layout.astro";
import Container from "@components/container.astro";
import Sectionhead from "@components/sectionhead.astro";
import Link from "@components/ui/link.astro";

// Filter blog entries with 'draft: false' & date before current date
const publishedBlogEntries = await getCollection("blog", ({ data }) => {
  return !data.draft && data.publishDate < new Date();
});

// Sort content entries by publication date
publishedBlogEntries.sort(function (a, b) {
  return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
});
---

<style>
  .blogImg{
    background-image: url('https://cdn.hashnode.com/res/hashnode/image/upload/v1648344926103/sjYNzV3_7.png?w=1600&h=840&fit=crop&crop=entropy&auto=compress,format&format=webp');
    background-position: top;
    background-size:cover;
    width: 10rem;
    height: 10rem;
    border-radius: 0.5rem;
  }
</style>

<Layout title="Blog">
  <Container>
    <Sectionhead>
      <Fragment slot="title">Blog by Learners</Fragment>
      <Fragment slot="desc">Sharing and Learning Resources</Fragment>
    </Sectionhead>
    <main class="mt-16 justify-center flex flex-row">
      <div class="blogImg"></div>
      <div class="flex flex-col justify-start p-6 gap-5">
        <p class= "text-slate-500 leading-relaxed">All About Next.js Pre-rendering and Data Fetching via SSR and SSG</p>
        <p class= "text-slate-500 leading-relaxed">By Nishant Shrestha</p>
        <Link
          href="https://devnishant.hashnode.dev/all-about-nextjs-pre-rendering-and-data-fetching-via-ssr-and-ssg#cl1awxbmj02cu6znv2irkd93g"
          target="_blank" 
          rel="noopener noreferrer"
          size="md"
          class="bg-brand-600 border-none outline-none hover:bg-brand w-32">
          View Blog
        </Link>
      </div>
    </main>
  </Container>
</Layout>
